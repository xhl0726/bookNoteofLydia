

## 卷一 

* 分布式锁的实现 如何判断锁是不是自己的 

* java 有什么数据类型 

  * 内置数据类型——八种基本数据类型，byte1，short2，char2，int4，long8，float4，double8，boolean1字节。
  * 引用数据类型，引用类型指向一个对象，指向变量的引用即引用变量。对象、数组都是。

* java 有哪些集合 map 有几种 

  * 一个独立元素的序列，**List**（以特定顺序保存一组元素）、**Set**（元素不允许重复）、**Queue**（只能在一端插入并从另一端移除）; **ArrayList、LinkedList、HashSet**（检索元素最快）、**TreeSet**（将比较结果的升序保存对象）、**LinkedHashSet**（按被添加的先后顺序保存对象）。
  * **HashMap、TreeMap、LinkedHashMap**（在保持**HashMap**查找速度的同时按键的插入顺序保存键）

* hashMap 怎么实现的 

  主干Entry数组+链表，数组内坑位存entry，当哈希值冲突时存链表。哈希map的负载因子0.75，数组初始容量16，超过这个值数组自动扩容为原来的两倍，一直保持2的n次幂。执行put操作时候才真正构建table数组。

  保持2 的n次幂是因为在计算出哈希值映射到bucket位时，indexFor函数使用hashcode和length-1的与操作，2的n次幂-1使低位一直为1，而扩容后只有一位差异，也就是多出了最左位的1，这样在通过 h&(length-1)的时候，只要h对应的最左边的那一个差异位为0，就能保证得到的新的数组索引和老数组索引一致(大大减少了之前已经散列良好的老数组的数据位置重新调换)。

* hashMap 怎么插入的，只是插入到链表不会变吗（大于8变成红黑树），怎么哈希的，怎么扩容的 

  插入的元素key值通过hash函数计算出值，indexFor函数映射到下标，如果存在（哈希冲突），判断key是否相同，相同则覆盖，不相同则判断插入链表。size大于阈值的话扩容，链表超过8变成红黑树。

* ConcurrentHashMap 怎么实现的，分段锁怎么实现的 

  

* 数据库 索引怎么实现的 为什么用 b+ 树 

  

* b+ 树为什么左右节点用指针连接 我：b 树没有左右指针需要中序遍历 面试官：什么时候需要中序遍历 

* 为什么二级索引存主键 ID 不直接存数据位置 

* sql 语句怎么执行的，比如 select 

* 索引覆盖是什么 

* tcp 如何建立连接 

  三次握手。客户端和服务器三次包的传输，期间维护一个序列号。

* 为什么三次握手 第二次握手后没有回复会怎么样 我：重发 面试官会一直重发吗，我：有一定次数（不确定） 

  * 保证可靠连接。客户端发送的请求如果在网络中滞留，那么隔很久才会收到服务器发回的连接确认。由于三次握手的存在，客户端会忽略服务器的二次请求，不重复打开连接。
  * 服务器等待一段时间会释放资源，客户端一段时间没收到第二次握手会重发连接请求。

* tcp 怎么保证可靠性 

  除了三次握手和四次挥手建立可靠连接，丢包可以重发，控制包的顺序纠正。以及流量控制和拥塞控制。

* 拥塞控制的详细过程 在现代网络环境中，拥塞控制有什么问题

  TCP 通过四个算法进行拥塞控制，慢开始，拥塞避免，快重传和快恢复，两两搭配。慢开始设置拥塞窗口为1，收到确认时窗口翻倍，直到达到一个慢开始门限，将慢开始门限减半，拥塞窗口置1，启动拥塞避免，每次收到确认窗口只加一。

  连续收到三次丢包确认，则重传下一个序号包，即快重传，此时实际上没有网络拥塞，所以使用快恢复，将慢开始门限减半，但是拥塞窗口不置1，而是置为门限值。启动拥塞避免，一次加一。

* 设计可靠 udp

## 卷二 小米一面/二面

### 一面

* 开头问自己学的哪方面最好。    

* Final 关键词的作用。    

* Object 类有哪些方法。    

* Notify 和 wait 的作用，和 sleep 的区别。    

* NIO 和 IO 的区别。    

* 怼项目。    

* 微信你觉得是 TCP 还是 UDP。    

* 查询姓王的用户所持有手机的总价。    

* 动态规划零钱找零问题。    

* 自己对于代码的要求。

### JVM 

1.    JVM 的内存结构。    
2.    GC 算法。    
3.    垃圾收集器。   

###   线程方面 

1.    线程的各个状态。    
2.    线程怎么会进入阻塞。    
3.    怎么终止线程。   

###   数据结构方面 

1.    了解的数据结构。    
2.    ArrayList 的扩容方式。    
3.    List 线程安全。    
4.    ArrayList 和 LinkedList 的区别。   

###   网络 

1.    TCP 保证可靠传输的方式。    
2.    拥塞避免。    
3.    TCP 三次握手和四次挥手，和两端的状态。   

###   数据库 

1.    你说你所知道索引的方面（能讲的）。    
2.    隔离级别。   

###   Redis 

1.    Redis 的数据结构。    
2.    Redis 为什么那么快。    
3.    Io 多路复用了解吗。    
4.    上下文切换的情况。   